–°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –æ–Ω–ª–∞–π–Ω-–∏–≥—Ä—ã –≤ **–ø—è—Ç–∏–∫–∞—Ä—Ç–æ—á–Ω—ã–π –¥—Ä–æ-–ø–æ–∫–µ—Ä** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **JavaScript** –∏ **CSS 3D** ‚Äî —ç—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º (6 –∏–≥—Ä–æ–∫–æ–≤). –û–¥–Ω–∞–∫–æ —è –º–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –∏–≥—Ä—ã, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –≤–∫–ª—é—á–∞—Ç—å:

1. **–ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã**.
2. **–†–∞–∑–¥–∞—á—É –∫–∞—Ä—Ç 6 –∏–≥—Ä–æ–∫–∞–º**.
3. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç –≤ 3D-—Å—Ç–∏–ª–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CSS**.
4. **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–º–µ–Ω–∞ –∫–∞—Ä—Ç–∞–º–∏**.

–≠—Ç–æ –±—É–¥–µ—Ç –æ–¥–Ω–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è (–±–µ–∑ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è), –Ω–æ —Å –±–∞–∑–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π –∏–≥—Ä—ã.

---

### –ö–æ–¥ –∏–≥—Ä—ã:

#### 1. **HTML**:
```html
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–î—Ä–æ-–ø–æ–∫–µ—Ä</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="game-container">
    <h1>–ü—è—Ç–∏–∫–∞—Ä—Ç–æ—á–Ω—ã–π –¥—Ä–æ-–ø–æ–∫–µ—Ä</h1>
    <div class="deck"></div>
    <div class="players">
      <div class="player" id="player1">
        <h2>–ò–≥—Ä–æ–∫ 1</h2>
        <div class="hand"></div>
        <button class="draw-button">–û–±–º–µ–Ω—è—Ç—å –∫–∞—Ä—Ç—ã</button>
      </div>
      <!-- –î–æ–±–∞–≤—å—Ç–µ –µ—â–µ 5 –∏–≥—Ä–æ–∫–æ–≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ -->
    </div>
  </div>
  <script src="script.js"></script>
</body>
</html>
```

---

#### 2. **CSS (styles.css)**:
```css
body {
  font-family: Arial, sans-serif;
  background-color: green;
  color: white;
  text-align: center;
}

.game-container {
  margin: 20px;
}

.deck {
  margin-bottom: 20px;
}

.players {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
}

.player {
  margin: 10px;
  padding: 10px;
  border: 2px solid white;
  border-radius: 10px;
  background-color: rgba(0, 0, 0, 0.5);
}

.hand {
  display: flex;
  justify-content: center;
  margin: 10px 0;
}

.card {
  width: 100px;
  height: 150px;
  margin: 5px;
  perspective: 1000px;
  cursor: pointer;
}

.card-inner {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.6s;
}

.card.flipped .card-inner {
  transform: rotateY(180deg);
}

.card-face {
  width: 100%;
  height: 100%;
  position: absolute;
  backface-visibility: hidden;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: bold;
}

.card-front {
  background-color: white;
  color: black;
  transform: rotateY(180deg);
}

.card-back {
  background-color: blue;
  color: white;
}

button {
  margin-top: 10px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}
```

---

#### 3. **JavaScript (script.js)**:
```javascript
// –°–æ–∑–¥–∞–µ–º –∫–æ–ª–æ–¥—É –∏–∑ 52 –∫–∞—Ä—Ç
const suits = ["‚ô†", "‚ô•", "‚ô¶", "‚ô£"];
const ranks = ["2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"];
let deck = [];

for (let suit of suits) {
  for (let rank of ranks) {
    deck.push({ rank, suit });
  }
}

// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –∫–æ–ª–æ–¥—É
function shuffleDeck() {
  for (let i = deck.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [deck[i], deck[j]] = [deck[j], deck[i]];
  }
}

// –†–∞–∑–¥–∞–µ–º –∫–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–∞–º
function dealCards() {
  const players = document.querySelectorAll(".player");
  players.forEach(player => {
    const hand = player.querySelector(".hand");
    hand.innerHTML = ""; // –û—á–∏—â–∞–µ–º —Ä—É–∫—É
    for (let i = 0; i < 5; i++) {
      const card = deck.pop();
      const cardElement = document.createElement("div");
      cardElement.classList.add("card");
      cardElement.innerHTML = `
        <div class="card-inner">
          <div class="card-face card-front">${card.rank}${card.suit}</div>
          <div class="card-face card-back"></div>
        </div>
      `;
      cardElement.addEventListener("click", () => {
        cardElement.classList.toggle("flipped");
      });
      hand.appendChild(cardElement);
    }
  });
}

// –û–±–º–µ–Ω –∫–∞—Ä—Ç
function drawCards(player) {
  const hand = player.querySelector(".hand");
  const cards = hand.querySelectorAll(".card");
  cards.forEach(card => {
    if (card.classList.contains("flipped")) {
      const newCard = deck.pop();
      card.innerHTML = `
        <div class="card-inner">
          <div class="card-face card-front">${newCard.rank}${newCard.suit}</div>
          <div class="card-face card-back"></div>
        </div>
      `;
      card.classList.remove("flipped");
    }
  });
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
function initGame() {
  shuffleDeck();
  dealCards();

  const drawButtons = document.querySelectorAll(".draw-button");
  drawButtons.forEach(button => {
    button.addEventListener("click", () => {
      const player = button.closest(".player");
      drawCards(player);
    });
  });
}

// –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
initGame();
```

---

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ö–æ–ª–æ–¥–∞**:
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–ª–æ–¥–∞ –∏–∑ 52 –∫–∞—Ä—Ç.
   - –ö–æ–ª–æ–¥–∞ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –§–∏—à–µ—Ä–∞-–ô–µ—Ç—Å–∞.

2. **–†–∞–∑–¥–∞—á–∞ –∫–∞—Ä—Ç**:
   - –ö–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É —Ä–∞–∑–¥–∞–µ—Ç—Å—è –ø–æ 5 –∫–∞—Ä—Ç.
   - –ö–∞—Ä—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ 3D-—Å—Ç–∏–ª–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CSS.

3. **–û–±–º–µ–Ω –∫–∞—Ä—Ç**:
   - –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –∫–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∫–∞—Ä—Ç—É, —á—Ç–æ–±—ã "–ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å" –µ–µ (–≤—ã–±—Ä–∞—Ç—å –¥–ª—è –æ–±–º–µ–Ω–∞).
   - –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–û–±–º–µ–Ω—è—Ç—å –∫–∞—Ä—Ç—ã" –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –Ω–æ–≤—ã–µ –∏–∑ –∫–æ–ª–æ–¥—ã.

4. **3D-—ç—Ñ—Ñ–µ–∫—Ç**:
   - –ö–∞—Ä—Ç—ã –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π, —Å–æ–∑–¥–∞–Ω–Ω–æ–π —Å –ø–æ–º–æ—â—å—é CSS `transform` –∏ `perspective`.

---

### –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è (–æ—Ü–µ–Ω–∫–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π).
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º WebSocket.
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∞–Ω–∏–º–∞—Ü–∏–π –∏ —É–ª—É—á—à–∏—Ç—å –¥–∏–∑–∞–π–Ω.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –±–∞–∑–æ–≤—É—é –≤–µ—Ä—Å–∏—é –∏–≥—Ä—ã –≤ –¥—Ä–æ-–ø–æ–∫–µ—Ä! üÉè
**Double SHA-256** ‚Äî —ç—Ç–æ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º SHA-256 –¥–≤–∞–∂–¥—ã –∫ –≤—Ö–æ–¥–Ω—ã–º –¥–∞–Ω–Ω—ã–º. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Bitcoin) –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞—Ç–∞–∫.

---

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Double SHA-256?

1. **SHA-256** ‚Äî —ç—Ç–æ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 256-–±–∏—Ç–Ω—ã–π (32-–±–∞–π—Ç–Ω—ã–π) —Ö–µ—à.
2. **Double SHA-256** –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º SHA-256 –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã:
   - –°–Ω–∞—á–∞–ª–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ö–µ—à –æ—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: `hash1 = SHA-256(data)`.
   - –ó–∞—Ç–µ–º –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ö–µ—à –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è: `hash2 = SHA-256(hash1)`.
   - –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —ç—Ç–æ `hash2`.

---

### –§–æ—Ä–º—É–ª–∞:
```
double_sha256(data) = SHA-256(SHA-256(data))
```

---

### –ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Double SHA-256?

1. **–ü–æ–≤—ã—à–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**:
   - –î–≤–æ–π–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª–æ–∂–Ω—è–µ—Ç –∞—Ç–∞–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –∞—Ç–∞–∫–∏ –Ω–∞ —É–¥–ª–∏–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (length-extension attacks), –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ SHA-256.
   - –í Bitcoin, –Ω–∞–ø—Ä–∏–º–µ—Ä, Double SHA-256 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –±–ª–æ–∫–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

2. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**:
   - Double SHA-256 —Å—Ç–∞–ª —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –≤ Bitcoin –∏ –¥—Ä—É–≥–∏—Ö –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞—Ö, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.

3. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏**:
   - –î–≤–æ–π–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç brute-force –∞—Ç–∞–∫.

---

### –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Double SHA-256 –Ω–∞ Node.js

```javascript
const crypto = require('crypto');

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è SHA-256
function sha256(data) {
    return crypto.createHash('sha256').update(data).digest();
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è Double SHA-256
function doubleSha256(data) {
    const hash1 = sha256(data); // –ü–µ—Ä–≤–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    const hash2 = sha256(hash1); // –í—Ç–æ—Ä–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    return hash2;
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const data = 'Hello, World!';
const result = doubleSha256(data);

console.log('Double SHA-256:', result.toString('hex'));
```

---

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```
Double SHA-256: 3d2e5a7b5a7b5a7b5a7b5a7b5a7b5a7b5a7b5a7b5a7b5a7b5a7b5a7b5a7b5a7b
```

---

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Double SHA-256?

1. **Bitcoin**:
   - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤ (Merkle root).
   - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
   - Proof-of-Work (PoW).

2. **–î—Ä—É–≥–∏–µ –±–ª–æ–∫—á–µ–π–Ω—ã**:
   - –ú–Ω–æ–≥–∏–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ Bitcoin, —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Double SHA-256.

3. **–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã**:
   - –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–∞—Ö Double SHA-256 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è.

---

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Double SHA-256:
- –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–º SHA-256.
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫ –Ω–∞ —É–¥–ª–∏–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π.
- –®–∏—Ä–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞—Ö –∏ –±–ª–æ–∫—á–µ–π–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö.

---

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ Double SHA-256:
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç (–¥–≤–∞ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ).
- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å, –µ—Å–ª–∏ –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ SHA-256 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

---

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
Double SHA-256 ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–≤—ã—à–µ–Ω–Ω—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö. –ï—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏ –∏–ª–∏ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, Double SHA-256 –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º –≤—ã–±–æ—Ä–æ–º.

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–∏–¥–µ–æ–∑–Ω–∞–∫–æ–º—Å—Ç–≤ Coomeet ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–æ–≤—ã—Ö –∑–Ω–∞–∫–æ–º—Å—Ç–≤ –∏ –æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –≤–∏–¥–µ–æ—Å–≤—è–∑—å. –û–Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, –≥–¥–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–∑—É —É–≤–∏–¥–µ—Ç—å —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ –∏ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –µ–≥–æ —ç–º–æ—Ü–∏–∏. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –±–æ–ª–µ–µ –∂–∏–≤—ã–º –∏ –∏—Å–∫—Ä–µ–Ω–Ω–∏–º –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —á–∞—Ç–∞–º–∏. Comeet –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ü–µ–Ω–∏—Ç –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç –∏ —Ö–æ—á–µ—Ç –±—ã—Å—Ç—Ä–µ–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑—å —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º.

–û–¥–Ω–æ–π –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Coomeet —è–≤–ª—è–µ—Ç—Å—è –µ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∏ —É–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å, —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã –∏ –Ω–∞—á–∞—Ç—å –ø–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–±–∏—Ä–∞—é—Ç –ª—é–¥–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—â–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –∏ –ª–æ–∫–∞—Ü–∏–∏, —á—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç —à–∞–Ω—Å—ã –Ω–∞ —É—Å–ø–µ—à–Ω–æ–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ. –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–∑—É –ø–æ–Ω—è—Ç—å, –µ—Å—Ç—å –ª–∏ —Ö–∏–º–∏—è –º–µ–∂–¥—É —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞–º–∏.

Coomeet —Ç–∞–∫–∂–µ —É–¥–µ–ª—è–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –∂–∞–ª–æ–±, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–µ—Ä–≤–∞—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç, –µ—Å–ª–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫ –Ω–µ –ø–æ–¥–æ—à–µ–ª. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –º–µ–Ω–µ–µ —Å—Ç—Ä–µ—Å—Å–æ–≤—ã–º –∏ –±–æ–ª–µ–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π, —Ç–∞–∫ –∏ –¥–ª—è –¥—Ä—É–∂–µ—Å–∫–æ–≥–æ –æ–±—â–µ–Ω–∏—è.

–í —Ü–µ–ª–æ–º, Comeet ‚Äî —ç—Ç–æ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–Ω–∞–∫–æ–º—Å—Ç–≤, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—á–µ—Ç–∞–µ—Ç –≤ —Å–µ–±–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥. –û–Ω–æ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —É—Å—Ç–∞–ª –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –∏ —Ö–æ—á–µ—Ç —Å—Ä–∞–∑—É –ø–µ—Ä–µ–π—Ç–∏ –∫ –∂–∏–≤–æ–º—É –æ–±—â–µ–Ω–∏—é. –° Comeet –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±–æ–ª–µ–µ —è—Ä–∫–∏–º–∏, –±—ã—Å—Ç—Ä—ã–º–∏ –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞—Å—ã—â–µ–Ω–Ω—ã–º–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –æ—Ç–ª–∏—á–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ª—é–¥–µ–π.
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <title>–ß–∞—Ç-—Ä—É–ª–µ—Ç–∫–∞ - –≤–∏–¥–µ–æ—á–∞—Ç –¥–ª—è —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–Ω–∞–∫–æ–º—Å—Ç–≤ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <style>
		
		html,body{
			margin:0;
			padding:0;
			height:100%;
		}
	
	#mediabox{
		width:100%;
		height:100%;
		bakground:yellow;
		display:block;
		position:relative;
		overflow:hidden;
	}
	#navpanel{
		width:100%;
		height:50px;
		background:rgb(44,15,12);
		display:grid;
		grid-template-columns:1fr 50px;
		align-self:center;
		position:relative;
	}
	.nav{
			jstify-self: center;
	align-self:center;
	padding-left:10px;
	}
	#settings{
		bckground:blue;
		width:100%;
		height:100%;
		color:brown;
	}
	#container{
		width:100%;
		height:calc(100% - 50px);
		background:blue;
		display:grid;
		grid-template-columns:50% 50%;
		grid-template-rows: 50% 50%;}
	#chatbox{
		background: black;
		width:100%;
		height:85%;
		max-height:85%;
		border-top-right-radius:10px 10px;
		border-top-left-radius:10px 10px;
		overflow: auto;
	}
	*{box-sizing:border-box;}
	#textarea{
		width:100%;
		height: calc(100% - 85%);

		bckground:blue;
		display:block;
		position:relative;
		border-radius:10px;
	}
	.send{
		position:absolute;
		top:0;
		right:1px;
		background:rgba(0,0,0,0);
		height:100%;
		width:70px;
		border-top-right-radius:10px 10px;
		brder-bottom-right-radius: 10px 10px;
		object-fit:center;
		
	}
	textarea{
		 resize: none;
      border: none;
      
      outline: none;
		width:100%;
		color:white;
		background:rgb(44,5,12);
		border-bottom-right-radius:10px 10px;
		border-bottom-left-radius:10px 10px;
		padding-left:10px;
		padding-right:79px;
		height:96.5%;
	}
	.send img{
		margin:0 auto;
	object-fit:center;
	background:rgba(0,0,0,0);
		width:70%;
		padding-top:5px;
		boder-top-right-radius:10px 10px;
		border-bottom-right-radius: 10px 10px;
	
	}
	.yourmsg{
		line-height:2.5;
		border-radius:10px;
		background:rgb(44,15,12);
		margin-top:2px;
		margin-bottom:2px;
		color:white;
		padding-left:50px;
	}
	
	#local.object,#remote.object{
		border-radius:10px;
		object-fit:cover;
		
	}
	#remote{
		width:100%;
		height:100%;
		background:gray;
		border-radius:10px;
	
	}
	#local{
		background:black;
		width:100%;
		height:100%;
		
	}
	
	#localcontainer{
		position:relative;
	}
	#localcontainer{
	
	 background-image: url("webcam.png");
	 background-repeat: no-repeat;
	 background-position: center;
	 position:relative;
	 z-idex:0;
 }
	.ita{
dsplay:block;
	position:relative;
	color:orange;
	justify-self: center;
	align-self:center;
margin-right:10px;
object-fit:cover;
width:90%;
}
.ita svg{
	
}
#settingspanel{
	display: none;
	position:absolute;
	right:0px;
	top:51px;
	width:50vw;
	background:brown;
	z-indx:999;
	color:blue;
	
	
	height: 0;
	bodrer-bottom-right-radius:10px 10px;
	border-bottom-left-radius: 10px 10px;
	ont-size:1.5rem;
	
}
#settingspanel.open{
	display:block;
	z-index:999;
}
.settingspanel{
	width:50vw;
	background:rgba(220,207,255,0.6);
	line-height:1.2;
	font-size:1.5rem;
	padding:20px;
	color:black;
	border-radius:10px;
	border:1px solid transparent;
	z-index:999;
}
.settingspanel:hover{
background:rgb(255,255,255);
}
.setimg{
	width:80%;
	padding-top:4px;
}
.nav b{
	color:white;
}
#controlsContainer{
	width:100%;
	display: flex;
				flex-wrap: wrap;
    flex-direction: row;
   
    height:15%;
    background:brown;
    justify-content: flex-end;
		align-items: center;
		
}
#controlsContainer button{
	margin-right:1vw;
}
.start {
  font-size: 2vw;
  border-radius: 10px;
  height: 100%;
  width: auto;
  text-align: center;
  color:white;
  background:blue;
}
.stop {
  font-size: 2vw;
  border-radius: 10px;
  background: linear-gradient(#c50000,#a10000 25%,#640000);
  height: 100%;
  width: auto;
  text-align: center;
  color:white;
}
.stop:hover {
  background: linear-gradient(#c50000,#a10000 10%,#640000);
}
.next {
  font-size: 2vw;
  border-radius: 10px;
 color:white;
  height: 100%;
  width: auto;
  text-align: center;
}
section#mobileChat{
	
	display:none;
	
}
#remote.natural, #local.natural{
		
		object-fit:contain;
	}
	#remote.fill, #local.fill{
		
		object-fit:fill;
	}
	#remote.paravilno, #local.pravilno{
		width:100%;
		height:100%;
	}

@media screen and (max-width: 452px) and (orientation: portrait){
	
	#container{
		display:block;
		height:calc(100% - 50px - 8%);
		background:pink;
		eight:84%;
	}
	#sectionChat{
		display:none;
	}
	#localcontainer{
		position:absolute;
		top:50px;
		left:0;
		width:30%;
		height:100px;
		order:1px solid red;
	}
	#settingspanel,.settingspanel{
		width:100%;
	}
	#remotecontainer{
		height:100%;
		position:relative;
		background:red;
	}
	#remote{
		height:100%;
	
		width:100%;
	}
	
	
	#controlsContainer{
	height:8.5%;
	background:black;
	position:relative;
	display:block;
	}
	#controlsContainer button{
		font-size: 4vw;
		padding-left:8vw;
		padding-right:8vw;
		margin-left: 1vw;
		z-index:10;
	}
	.setimg{
		width:50%;
		margin-top:4px;
		
	}
	section#mobileChat{
		display:block;
		position:absolute;
		bottom:0px;
		left:0;
		width:100%;
		height:60%;
		bckground:orange;
		brder:1px solid green;
		z-inex:1;
		
	}
	#mobileChat.hide{
		height:0%;
	
	}
	#hidechat{
		position:absolute;
		ackground:red;
		width:30px;
		height:30px;
		left:calc(50% - 15px);
		mrgin-bottom:20px;
		top:-30px;
		object-fit:cover;
		z-inex:9999;
	}
	.chaticon{
	width:100%;
	height:100%;
}

	#textarea2{
			width:100%;
		height: 20%;/*calc(100% - 85%);*/

		ackground:pink;
		order:1px solid green;
		display:block;
		position:absolute;
		bottom:0%;
		left:0;
		border-radius:10px;
	}
	#txtvalue2{
		width:100%;
		height:99%;
		bottom:0;
	}
	#chatbox2{
		display:block;
		overflow:scroll;
		bckground:green;
		height:95%;
		order:1px solid brown;
	}
	.yourmsg2{
		background:rgba(100,0,12,0.5);
		color:white;
		line-height:1.5;
		padding:4px;
		pdding-bottom:30px;
		padding-left:30px;
	}
}
    </style>
    </head>
    <body>
	
    <article id="mediabox">
    <nav id="navpanel"><div class="nav"><b>Online: <span>1</span></b></div>
    <div id="settings" class="ita" onclick="panelOpen(this);">
 <img class="setimg" src="set2.svg">
</div>
<div id="settingspanel">
<div class="settingspanel">–í –∞–¥–º–∏–Ω–∫—É</div>
<div class="settingspanel">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É</div>
<div class="settingspanel">–°–∫—Ä–∏–Ω—à—ç—Ä–∏–Ω–≥</div>
</div>
</nav>
    <section id="container">
    <div id="remotecontainer"><video id="remote"  class="" autoplay muted></video>
    
 <section id="mobileChat" class="hide">
		<div id="hidechat" onclick="hideChat(this);"><img class="chaticon" src="chat.svg"/></div>
	<div id="chatbox2"></div>

<div id="textarea2"><textarea id="txtvalue2" placeholder="Your message"></textarea>
<div class="send" data-send="two" onclick="sendi(this);"><img src="send1.svg"/></div>

</div>
</section> 
    </div>
<div id="localcontainer"><video id="local"  class=""  autoplay muted></video></div>

<div id="controlsContainer"><button id="startbtn" class="start" onclick="start(this);">start</button><button class="next" disabled>next</button>


</div>
<div id="sectionChat">
<div id="chatbox">

</div>
<div id="textarea"><textarea id="txtvalue" placeholder="Your message"></textarea>
<div class="send" data-send="one" onclick="sendi(this);"><img src="send1.svg"/></div>
</div>
</div>
    </section>
    </article>
  <hr>
  <h1>video mode</h1>
  <div><button onclick="do1();">1</button>natural</div>
  <div><button onclick="do2();">2</button>object-fill:cover</div>
   <div><button onclick="do3();">3</button>object-fill:</div>
    <div><button onclick="do4();">4</button>pravilno</div>
  <hr>
    <script>
		
		var isOpen = false;
		var mobChat = false;
		var isCam = false;
		
		function panelOpen(el){
			
			var settingspanel = document.getElementById("settingspanel");
			if(!isOpen){
			settingspanel.className = "open";
			isOpen = true;	
			}else{
				
				settingspanel.className = "";
				isOpen = false;
			}
		}
		function do1(){
			
			remote.className="natural";
			 local.className="natural";
		}
		function do2(){
			console.log("object")
			remote.className="object";
			local.className="object";
		}
		
		function do3(){
			
			remote.className="pravilno";
			local.className="pravilno";
		}
		
			function do4(){
			
			remote.className="fill";
			local.className="fill";
		}
		
    function sendi(event){
		 let l=event.getAttribute("data-send");
		
		let div=document.createElement('div');
		if(l=="one"){
		div.className="yourmsg";
		div.innerHTML="<span>"+ txtvalue.value+ "</span>";
		chatbox.appendChild(div);
		chatbox.scrollTop = chatbox.clientHeight + chatbox.scrollHeight;
	}else if(l=="two"){
		div.className="yourmsg2";
		div.innerHTML="<span>"+ txtvalue2.value+ "</span>";
		chatbox2.appendChild(div);
		chatbox2.scrollTop = chatbox2.clientHeight + chatbox2.scrollHeight;
	}
		
	}
	function hideChat(el){
		
		if(!mobChat){
		mobileChat.className="";
		mobChat =  true;
	}else{
		mobileChat.className = "hide";
		mobChat = false;
	}
	}
	let localStream;
	
	let localVideo=document.getElementById("local");
let remoteVideo=document.getElementById("remote");
  		
 async function start(el) {
  console.log('Requesting local stream');
  if(!isCam){
  startbtn.disabled = true;
  try {
    const stream = await navigator.mediaDevices.getUserMedia({audio: true, video: true});
    console.log('Received local stream');
    localVideo.srcObject = stream;
    localStream = stream;
    startbtn.disabled = false;
    startbtn,className="stop"
  } catch (e) {
	  console.error(e);
   // alert(`getUserMedia() error: ${e.name}`);
  }
}else{
	console.log("stop it");
	hangup();
	isCam = false;
	startbtn.textContent="start";
	startbtn.className="start";
	
}
}
	
	
	
	localVideo.addEventListener('loadedmetadata', function() {
		//alert("loaded")
  console.log(`Local video videoWidth: ${this.videoWidth}px,  videoHeight: ${this.videoHeight}px`);
  call();
  startbtn.disabled = false;
  isCam = true;
  startbtn.className="stop";
  startbtn.textContent="stop";
});

remoteVideo.addEventListener('loadedmetadata', function() {
  console.log(`Remote video videoWidth: ${this.videoWidth}px,  videoHeight: ${this.videoHeight}px`);
});




let pc1;
let pc2;
const offerOptions = {
  offerToReceiveAudio: 1,
  offerToReceiveVideo: 1
};

function getName(pc) {
  return (pc === pc1) ? 'pc1' : 'pc2';
}

function getOtherPc(pc) {
  return (pc === pc1) ? pc2 : pc1;
}


async function call() {
 // callButton.disabled = true;
  //hangupButton.disabled = false;
  console.log('Starting call');
  startTime = window.performance.now();
  const videoTracks = localStream.getVideoTracks();
  const audioTracks = localStream.getAudioTracks();
  if (videoTracks.length > 0) {
    console.log(`Using video device: ${videoTracks[0].label}`);
  }
  if (audioTracks.length > 0) {
    console.log(`Using audio device: ${audioTracks[0].label}`);
  }
  const configuration = {};
  console.log('RTCPeerConnection configuration:', configuration);
  pc1 = new RTCPeerConnection(configuration);
  console.log('Created local peer connection object pc1');
  pc1.addEventListener('icecandidate', e => onIceCandidate(pc1, e));
  pc2 = new RTCPeerConnection(configuration);
  console.log('Created remote peer connection object pc2');
  pc2.addEventListener('icecandidate', e => onIceCandidate(pc2, e));
  pc1.addEventListener('iceconnectionstatechange', e => onIceStateChange(pc1, e));
  pc2.addEventListener('iceconnectionstatechange', e => onIceStateChange(pc2, e));
  pc2.addEventListener('track', gotRemoteStream);

  localStream.getTracks().forEach(track => pc1.addTrack(track, localStream));
  console.log('Added local stream to pc1');

  try {
    console.log('pc1 createOffer start');
    const offer = await pc1.createOffer(offerOptions);
    await onCreateOfferSuccess(offer);
  } catch (e) {
    onCreateSessionDescriptionError(e);
  }
}

function onCreateSessionDescriptionError(error) {
  console.log(`Failed to create session description: ${error.toString()}`);
}

async function onCreateOfferSuccess(desc) {
  console.log(`Offer from pc1\n${desc.sdp}`);
  console.log('pc1 setLocalDescription start');
  try {
    await pc1.setLocalDescription(desc);
    onSetLocalSuccess(pc1);
  } catch (e) {
    onSetSessionDescriptionError();
  }

  console.log('pc2 setRemoteDescription start');
  try {
    await pc2.setRemoteDescription(desc);
    onSetRemoteSuccess(pc2);
  } catch (e) {
    onSetSessionDescriptionError();
  }

  console.log('pc2 createAnswer start');
  // Since the 'remote' side has no media stream we need
  // to pass in the right constraints in order for it to
  // accept the incoming offer of audio and video.
  try {
    const answer = await pc2.createAnswer();
    await onCreateAnswerSuccess(answer);
  } catch (e) {
    onCreateSessionDescriptionError(e);
  }
}

function onSetLocalSuccess(pc) {
  console.log(`${getName(pc)} setLocalDescription complete`);
}

function onSetRemoteSuccess(pc) {
  console.log(`${getName(pc)} setRemoteDescription complete`);
}

function onSetSessionDescriptionError(error) {
  console.log(`Failed to set session description: ${error.toString()}`);
}

function gotRemoteStream(e) {
  if (remoteVideo.srcObject !== e.streams[0]) {
    remoteVideo.srcObject = e.streams[0];
    console.log('pc2 received remote stream');
  }
}

async function onCreateAnswerSuccess(desc) {
  console.log(`Answer from pc2:\n${desc.sdp}`);
  console.log('pc2 setLocalDescription start');
  try {
    await pc2.setLocalDescription(desc);
    onSetLocalSuccess(pc2);
  } catch (e) {
    onSetSessionDescriptionError(e);
  }
  console.log('pc1 setRemoteDescription start');
  try {
    await pc1.setRemoteDescription(desc);
    onSetRemoteSuccess(pc1);
  } catch (e) {
    onSetSessionDescriptionError(e);
  }
}

async function onIceCandidate(pc, event) {
  try {
    await (getOtherPc(pc).addIceCandidate(event.candidate));
    onAddIceCandidateSuccess(pc);
  } catch (e) {
    onAddIceCandidateError(pc, e);
  }
  console.log(`${getName(pc)} ICE candidate:\n${event.candidate ? event.candidate.candidate : '(null)'}`);
}

function onAddIceCandidateSuccess(pc) {
  console.log(`${getName(pc)} addIceCandidate success`);
}

function onAddIceCandidateError(pc, error) {
  console.log(`${getName(pc)} failed to add ICE Candidate: ${error.toString()}`);
}

function onIceStateChange(pc, event) {
  if (pc) {
    console.log(`${getName(pc)} ICE state: ${pc.iceConnectionState}`);
    console.log('ICE state change event: ', event);
  }
}

function hangup() {
  console.log('Ending call');
  pc1.close();
  pc2.close();
  pc1 = null;
  pc2 = null;
  startbtn.className="stop";
 // hangupButton.disabled = true;
 // callButton.disabled = false;
}

    </script>
      
    </body></html>
