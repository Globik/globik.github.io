<!DOCTYPE html><html>
	<head>
	 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<!--	<link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
	
	 
		 <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script> -->
		 
		 <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
		 <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
		 <style>
		#cont{
			width:100%;
		}
	video,canvas{
		border:10px solid red;
		width:100%;
	}
#videocontainer{
	display:block;
	position:relative;
	width:100%;
}
#pic{
	width:100px;
	height:100px;
	position:absolute;
	
	top:10;
	right:20;
	z-index:10;
	background-image: url(w4.png);
	background-position: center;
	background-size: 100%;
	background-repeat: no-repeat;
}
video::poster{
	object-fit:cover;
}

		 </style>
	</head>
	<body><h1>V7</h1>
		<div id="cont"><video id="video" autoplay muted controls playsinline crossorigin></video></div>
		<output id="out"></output>
		<button onclick="screen();">screen</button>
	 
		<script>
		var vid=document.getElementById("video");
		
		if(Hls.isSupported()){
			//alert("hls supported")
			var hls=new Hls();
			hls.loadSource("https://media.gov39.ru/webcam-rec/mapp_chernyshevskoe.stream/playlist.m3u8");
			hls.attachMedia(vid);
			//vid.play();
			vid.oncanplay=function(){
				deb("can play")
				//vid.play();
			}
			vid.onloadedmetadata=function(e){
				deb("onloadedmetadata"+JSON.stringify(e));
				vid.currentTime=5;
				//vid.play();
			}
			vid.onerror=function(e){
				alert(e)
			}
			
		}
		//vid.canPlayType('application/vnd.apple.mpegurl')
		//	vid.src="https://media.gov39.ru/webcam-rec/mapp_chernyshevskoe.stream/playlist.m3u8";
			//vid.onloadedmetadata=function(){
				//vid.play();
			//}
		function screen(){
			var vidi=document.getElementById("video");
		//	var vidi2=document.getElementById("video2");
	//	const canvas2=document.querySelector('.canvas');
	//const canvas2=document.createElement('canvas');
	//var img=document.createElement('img');
    //    canvas2.width = 500;//1920;
    //    canvas2.height =500;// 1080;

      //  const ctx = canvas2.getContext('2d');
      //  ctx.clearRect(0,0,500,500);
      //  ctx.drawImage(vidi,0,0, /*canvas2.width, canvas2.height*/500,500);
       // const stream=canvas2.captureStream();
       // vidi2.srcObject=stream;
       //let sifa = canvas2.toDataURL('image/jpeg', 0.5);
       //img.src=sifa;
        //document.body.appendChild(canvas2);
       // document.body.appendChild(img);
        
    html2canvas(document.querySelector("#cont")).then(canvas => {
    document.body.appendChild(canvas)
});

		}
		function deb(s){
			out.innerHTML+=s+'<br>';
		}
		</script>
		</body></html>
