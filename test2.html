<!DOCTYPE html><html>
	<head>
	 
	<link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
	
	 
		 <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
		 
		 <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
		 <style>
		
	video{
		border:1px solid green;
	}
#videocontainer{
	display:block;
	position:relative;
	width:100%;
}
#pic{
	width:100px;
	height:100px;
	position:absolute;
	
	top:10;
	right:20;
	z-index:10;
	background-image: url(w4.png);
	background-position: center;
	background-size: 100%;
	background-repeat: no-repeat;
}
video::poster{
	object-fit:cover;
}

		 </style>
	</head>
	<body>
		<video id="video" autoplay muted controls playsinline crossorigin></video>
		<button onclick="screen();">screen</button>
		<canvas class="canvas"></canvas>
		<script>
		var vid=document.getElementById("video");
		
		if(Hls.isSupported()){
			//alert("hls supported")
			var hls=new Hls();
			hls.loadSource("https://media.gov39.ru/webcam-rec/mapp_chernyshevskoe.stream/playlist.m3u8");
			hls.attachMedia(vid);
			//vid.play();
			vid.oncanplay=function(){
				alert("can play")
				vid.play();
			}
			vid.onloadedmetadata=function(e){
				alert("onloadedmetadata"+JSON.stringify(e));
				vid.currentTime=10;
				vid.play();
			}
			vid.onerror=function(e){
				alert(e)
			}
			
		}
		//vid.canPlayType('application/vnd.apple.mpegurl')
		//	vid.src="https://media.gov39.ru/webcam-rec/mapp_chernyshevskoe.stream/playlist.m3u8";
			//vid.onloadedmetadata=function(){
				//vid.play();
			//}
		function screen(){
		const canvas2=document.querySelector('.canvas');
        canvas2.width = 1920;
        canvas2.height = 1080;

        const ctx = canvas2.getContext('2d');
var img=new Image()
img.src="w4.png";

img.onload=function(){
        ctx.drawImage(video, 0, 0, canvas2.width, canvas2.height);
        ctx.drawImage(img, 50, 50, 100, 100);

        canvas2.toBlob(function (blob) {
          saveAs(blob, "39granica.png");
        //  video.style.width="100%";
         // video.style.height=canvas2.height;
        });
	}
		}
		</script>
		</body></html>
